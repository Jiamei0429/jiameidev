import{defineComponent as s,ref as r,computed as i,onMounted as d,h as o,Transition as c}from"vue";import{useLocaleConfig as m}from"vuepress-shared/client";import{l as v,U as f}from"../define-3fd15ee3.js";import"../styles/popup.scss";import{u as g}from"../usePWAEvent-f118b552.js";const W=n=>{const e=n.waiting;if(!e)return;const p=new MessageChannel;e.postMessage({type:"SKIP_WAITING"},[p.port2])};var b=s({name:"SWUpdatePopup",setup(n,{slots:e}){const p=m(v),a=r(),u=i(()=>!!a.value),l=()=>{a.value&&(W(a.value),a.value=void 0)};return d(()=>{g().on("updated",t=>{t&&(a.value=t)})}),()=>o(c,{name:"popup"},()=>{var t;return((t=e.default)==null?void 0:t.call(e,{enabled:u.value,reload:l}))||(u.value?o("button",{type:"button",class:"sw-update-popup",tabindex:0,onClick:()=>l()},[p.value.update,o("span",{class:"icon-wrapper"},o(f))]):null)})}});export{b as default};
//# sourceMappingURL=SWUpdatePopup.js.map
