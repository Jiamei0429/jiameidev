import{useEventListener as p,useDebounceFn as c}from"@vueuse/core";import{defineComponent as u,ref as s,onMounted as d,onUnmounted as h,h as o}from"vue";import{atou as _,LoadingIcon as m}from"vuepress-shared/client";import"../styles/echarts.scss";const g=(e,i,n)=>i==="js"?new Function("myChart",`let width,height,option,__echarts_config__;
{
${e}
__echarts_config__={width,height,option};
}
return __echarts_config__;
`)(n):{option:JSON.parse(e)};var f=u({name:"ECharts",props:{config:{type:String,required:!0},id:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"json"}},setup(e){const i=s(!0),n=s();let t;return p("resize",c(()=>t==null?void 0:t.resize(),100)),d(()=>{Promise.all([import("echarts"),new Promise(r=>setTimeout(r,MARKDOWN_ENHANCE_DELAY))]).then(([r])=>{t=r.init(n.value);const{option:a,...l}=g(_(e.config),e.type,t);t.resize(l),t.setOption(a),i.value=!1})}),h(()=>{t==null||t.dispose()}),()=>[e.title?o("div",{class:"echarts-title"},decodeURIComponent(e.title)):null,o("div",{class:"echarts-wrapper"},[o("div",{ref:n,class:"echarts-container",id:e.id}),i.value?o(m,{class:"echarts-loading",height:360}):null])]}});export{f as default};
//# sourceMappingURL=ECharts.js.map
