import{useMutationObserver as c}from"@vueuse/core";import{defineComponent as m,ref as d,computed as u,onMounted as p,watch as y,h as l}from"vue";import{atou as C,LoadingIcon as b}from"vuepress-shared/client";import"../styles/mermaid.scss";const o={useMaxWidth:!1},T=e=>({dark:e,background:e?"#1e1e1e":"#fff",primaryColor:e?"#389d70":"#4abf8a",primaryBorderColor:e?"#389d70":"#4abf8a",primaryTextColor:"#fff",secondaryColor:"#ffb500",secondaryBorderColor:e?"#fff":"#000",secondaryTextColor:e?"#ddd":"#333",tertiaryColor:e?"#282828":"#efeef4",tertiaryBorderColor:e?"#bbb":"#242424",tertiaryTextColor:e?"#ddd":"#333",noteBkgColor:e?"#f6d365":"#fff5ad",noteTextColor:"#242424",noteBorderColor:e?"#f6d365":"#333",lineColor:e?"#d3d3d3":"#333",textColor:e?"#fff":"#242424",mainBkg:e?"#389d70":"#4abf8a",errorBkgColor:"#eb4d5d",errorTextColor:"#fff",nodeBorder:e?"#389d70":"#4abf8a",nodeTextColor:e?"#fff":"#242424",signalTextColor:e?"#9e9e9e":"#242424",classText:"#fff",labelColor:"#fff",fillType0:e?"#cf1322":"#f1636e",fillType1:"#f39c12",fillType2:"#2ecc71",fillType3:"#fa541c",fillType4:"#25a55b",fillType5:"#13c2c2",fillType6:"#096dd9",fillType7:"#aa6fe9"});var g=m({name:"Mermaid",props:{id:{type:String,required:!0},code:{type:String,required:!0}},setup(e){const n=d(),t=d(""),a=d(!1),s=u(()=>C(e.code)),f=async()=>Promise.all([import("@mermaid"),new Promise(r=>setTimeout(r,MARKDOWN_ENHANCE_DELAY))]).then(async([{default:r}])=>{r.initialize({theme:"base",themeVariables:T(a.value),flowchart:o,sequence:o,journey:o,gantt:o,er:o,pie:o,...MERMAID_OPTIONS,startOnLoad:!1}),t.value=(await r.render(e.id,s.value)).svg});return p(()=>{const r=document.documentElement,i=()=>r.classList.contains("dark")||r.getAttribute("data-theme")==="dark";a.value=i(),f(),c(r,()=>{a.value=i()},{attributeFilter:["class","data-theme"],attributes:!0}),y(a,()=>f())}),()=>l("div",{ref:n,class:"mermaid-wrapper"},t.value?l("div",{class:"mermaid-content",innerHTML:t.value}):l(b,{class:"mermaid-loading",height:96}))}});export{g as default};
//# sourceMappingURL=Mermaid.js.map
