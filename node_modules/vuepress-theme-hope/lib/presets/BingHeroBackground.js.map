{"version":3,"file":"BingHeroBackground.js","sourceRoot":"","sources":["../../src/presets/BingHeroBackground.ts"],"names":[],"mappings":"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","sourcesContent":["import { usePageLang } from \"@vuepress/client\";\nimport { useStorage } from \"@vueuse/core\";\nimport { type VNode, computed, defineComponent, h, onMounted } from \"vue\";\n\nimport \"./bing-hero-background.scss\";\n\ninterface BingWallpaperInfo {\n  url: string;\n  wallpaper: string;\n  downloadable: boolean;\n  locales: Record<\n    string,\n    {\n      title: string;\n      description: string;\n      headline: string;\n      copyright: string;\n      backstage: string;\n      quickFact: string;\n    }\n  >;\n}\nconst bingStorage = useStorage<{\n  index: number;\n  data: BingWallpaperInfo[];\n}>(\"bing-image\", {\n  index: 0,\n  data: [],\n});\n\nconst LOCATION_SVG =\n  '<svg aria-hidden=\"true\" viewBox=\"0 0 12 12\"><path d=\"M6.5 3A1.5 1.5 0 1 0 8 4.5 1.5 1.5 0 0 0 6.5 3zm0-3A4.5 4.5 0 0 0 2 4.5a5.607 5.607 0 0 0 .087.873c.453 2.892 2.951 5.579 3.706 6.334a1 1 0 0 0 1.414 0c.755-.755 3.253-3.442 3.706-6.334A5.549 5.549 0 0 0 11 4.5 4.5 4.5 0 0 0 6.5 0zm3.425 5.218C9.565 7.514 7.632 9.868 6.5 11 5.369 9.868 3.435 7.514 3.075 5.218A4.694 4.694 0 0 1 3 4.5a3.5 3.5 0 0 1 7 0 4.634 4.634 0 0 1-.075.718z\"/></svg>';\n\nexport default defineComponent({\n  name: \"BingHeroBackground\",\n\n  // TODO: Add download button, image description and copyright information\n  // props: {\n  //   download: Boolean,\n  // },\n\n  setup() {\n    const lang = usePageLang();\n\n    const currentWallpaper = computed(() => {\n      const info = bingStorage.value.data[bingStorage.value.index];\n      const langCode = lang.value.toLowerCase().split(\"-\").pop();\n\n      if (info) {\n        const { url, wallpaper, downloadable, locales } = info;\n\n        return {\n          url,\n          wallpaper,\n          downloadable,\n          ...(locales[langCode!] ?? locales[\"en\"]),\n        };\n      }\n\n      return null;\n    });\n\n    const getImage = (): Promise<BingWallpaperInfo[]> => {\n      return fetch(\"//bing-wallpaper.vuejs.press/api/wallpaper\").then(\n        (response) => <Promise<BingWallpaperInfo[]>>response.json()\n      );\n    };\n\n    const prev = (): void => {\n      bingStorage.value.index--;\n    };\n\n    const next = (): void => {\n      bingStorage.value.index++;\n    };\n\n    onMounted(() => {\n      void getImage().then((res) => {\n        bingStorage.value.data = res;\n      });\n    });\n\n    return (): VNode[] | null =>\n      currentWallpaper.value\n        ? [\n            h(\"div\", {\n              class: \"mask\",\n              style: {\n                background: `url(${currentWallpaper.value.url}) center/cover no-repeat`,\n              },\n            }),\n            h(\"div\", { class: \"bing-switch\" }, [\n              h(\n                \"a\",\n                {\n                  class: \"bing-info\",\n                  href: currentWallpaper.value.backstage,\n                  target: \"_blank\",\n                },\n                [\n                  h(\"span\", {\n                    class: \"bing-location-icon\",\n                    innerHTML: LOCATION_SVG,\n                  }),\n                  currentWallpaper.value.title,\n                ]\n              ),\n              h(\"button\", {\n                class: \"bing-switch-left\",\n                disabled: bingStorage.value.index === 0,\n                onClick: () => prev(),\n              }),\n              h(\"button\", {\n                class: \"bing-switch-right\",\n                disabled:\n                  bingStorage.value.index === bingStorage.value.data.length - 1,\n                onClick: () => next(),\n              }),\n            ]),\n          ]\n        : null;\n  },\n});\n"]}