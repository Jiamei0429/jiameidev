import{useSassPalettePlugin as O}from"vuepress-plugin-sass-palette";import{Logger as f,ensureEndingSlash as T,getTitleFromFilename as h,checkVersion as E,getLocales as K}from"vuepress-shared/node";import{createPage as L}from"@vuepress/core";import{getDirname as M,path as y}from"@vuepress/utils";const v=M(import.meta.url),A="vuepress-plugin-auto-catalog",C=new f(A),I=T(y.resolve(v,"../client")),R=({pages:o},{component:l,iconGetter:c,iconRouteMetaKey:m="i",shouldIndex:n,indexRouteMetaKey:u="I",orderGetter:g,orderRouteMetaKey:d="O",titleGetter:r=a=>a.title,titleRouteMetaKey:i="title"})=>{l||o.forEach(a=>{const t={},s=r==null?void 0:r(a),e=c==null?void 0:c(a),p=(n==null?void 0:n(a))??null,_=(g==null?void 0:g(a))??null;s&&(t[i]=s),e&&(t[m]=e),typeof p=="boolean"&&(t[u]=p?1:0),typeof _=="number"&&(t[d]=_),a.routeMeta={...a.routeMeta,...t}})},$=async(o,{component:l="AutoCatalog",exclude:c=[],frontmatter:m=()=>({}),iconComponent:n,level:u=3,index:g=!1})=>{const{env:{isDebug:d},pages:r}=o,i=new Set,a=`<${l}${[1,2].includes(u)?` :level="${u}"`:""}${g?" index":""}>${n?`
  <template #icon="{ icon }">
    <${n} :icon="icon" />
  </template>
`:""}</${l}>
`;r.forEach(({path:t,pathLocale:s})=>{let e=t;if(t!=="/404.html")for(;e!==s;)e=e.replace(/\/(?:[^/]+\/?)$/,"/"),!i.has(e)&&c.every(p=>!e.match(p))&&r.every(({path:p})=>p!==e)&&(d&&C.info(`Generating catalog ${e}}`),i.add(e))}),await Promise.all(Array.from(i).map(t=>decodeURI(t)).map(t=>{const[,s=""]=/\/([^/]+)\/?$/.exec(t)||[],e=h(s);return L(o,{frontmatter:{title:e,...m(t)||{}},content:a,path:t})})).then(t=>{o.pages.push(...t)})},G={"/en/":{title:"Catalog"},"/zh/":{title:"目录"},"/zh-tw/":{title:"目錄"},"/de/":{title:"Katalog"},"/de-at/":{title:"Katalog"},"/vi/":{title:"Danh mục"},"/uk/":{title:"Каталог"},"/ru/":{title:"Каталог"},"/br/":{title:"Catálogo"},"/pl/":{title:"Katalog"},"/sk/":{title:"Katalóg"},"/fr/":{title:"Catalogue"},"/es/":{title:"Catálogo"},"/ja/":{title:"カタログ"},"/tr/":{title:"Katalog"},"/ko/":{title:"목차"},"/fi/":{title:"Luettelo"},"/hu/":{title:"Katalógus"},"/id/":{title:"Katalog"},"/nl/":{title:"Catalogus"}},x=(o={})=>l=>{E(l,A,"2.0.0-beta.61"),l.env.isDebug&&C.info("Options:",o),O(l,{id:"hope"});const{component:c,iconComponent:m,iconRouteMetaKey:n="i",indexRouteMetaKey:u="I",locales:g,orderRouteMetaKey:d="O",titleRouteMetaKey:r="title"}=o;return{name:A,define:()=>({AUTO_CATALOG_LOCALES:K({app:l,name:A,default:G,config:g}),AUTO_CATALOG_ICON_COMPONENT:m||"",AUTO_CATALOG_TITLE_META_KEY:r,AUTO_CATALOG_ICON_META_KEY:n,AUTO_CATALOG_ORDER_META_KEY:d,AUTO_CATALOG_INDEX_META_KEY:u}),onInitialized:async i=>{R(i,o),await $(i,o)},...c?{}:{clientConfigFile:`${I}config.js`}}};export{x as autoCatalogPlugin};
//# sourceMappingURL=index.js.map
